{
    "include" : ["layouts/1140", "forms/service"],
    "body" : {
        "all" : {
            "call" : "layouts/1140",
            "args" : {
                "title" : "Редактирование/удаление компании",
                "keywords" : "Ключевые слова",
                "description" : "Описание",
                "style" : "root/html.css",
                "script" : "root/html.js",
                "content" : {
                    "fill" : {"file" : "service-admin.html"},
                    "args" : {
                        "form-edit" : {
                            "call" : "forms/service",
                            "args" : {
                                "method" : "PUT"
                            }
                        },
                        "add-group" : {
                            "fill" : "<form method=\"POST\" action=\"{link}\" class=\"\"> <input type=\"submit\" class=\"b-button\" value=\"Добавить группу\" /></form>",
                            "args" : {
                                "link" : {"data" : ["service", "paths", "service_groups_admin"]}
                            }
                        },
                        "groups-list" : {
                            "join" : {
                                "map" : {
                                    "fill" : "<div>Группа<form method=\"POST\" action=\"{delete-link}\" class=\"\"> <input type=\"hidden\" name=\"method\" value=\"DELETE\" /><input type=\"submit\" class=\"b-button\" value=\"Удалить\" /></form></div>",
                                    "args" : {
                                        "delete-link" : {"data" : ["item", "paths", "service_group_admin"]}
                                    }
                                },
                                "list" : {
                                    "data" : ["service", "groups"]
                                },
                                "item" : "item"
                            }
                        },
                        "schedule-action" : {"data" : ["service", "paths", "service_schedule_admin"]},
                        "schedule-tr" : {
                            "join" : {
                                "map" : {
                                    "fill" : "<tr><td>{time}</td>{days-td}</tr>",
                                    "args" : {
                                        "days-td" : {
                                            "join" : {
                                                "map" : {
                                                    "fill" : "<td><input type=\"checkbox\" name=\"{name}\" value=\"1\" {checked}/></td>",
                                                    "args" : {
                                                        "checked" : {
                                                            "if" : {"data" : ["day"]},
                                                            "true" : "checked=\"cheked\"" 
                                                        },
                                                        "name" : {
                                                            "fill" : "s_{x}_{y}",
                                                            "args" : {
                                                                "y" : {"data": ["day_i"]},
                                                                "x" : {"data": ["hour_i"]}
                                                            }
                                                        }
                                                    }
                                                },
                                                "list" : {
                                                    "data" : ["hour", "by_day"]
                                                },
                                                "item" : "day",
                                                "index" : "day_i"
                                            }
                                        },
                                        "time" : {
                                            "data" : ["hour", "label"]
                                        }
                                    }
                                },
                                "list" : {
                                    "data" : ["service", "schedule"]
                                },
                                "item" : "hour",
                                "index" : "hour_i"
                            }
                        }
                    }
                }
            }
        }
    }
}